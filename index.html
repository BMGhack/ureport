<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>uReport</title>
    <!--<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css" integrity="sha384-+d0P83n9kaQMCwj8F4RJB66tzIwOKmrdb46+porD/OvrJ+37WqIM7UoBtwHO6Nlg" crossorigin="anonymous">
    <!--<link rel="stylesheet" href="lib/bootstrap/css/bootstrap.css">-->
    <link rel="stylesheet" href="css/uReport.css">
</head>
<body>

<div class="container">

    <div class="row">

        <div class="col-12">
            <h1>uReport: Request a City Service</h1>
            <p>
                Use the form below to notify the City of community issues, such as potholes, graffiti, malfunctioning street lights, and more. When you submit your reports or comment to the City it will be sent to the appropriate department. Choose a category to get started!
            </p>
            <p>
                You may also send an e-mail directly to <a href="mailto:info@bloomington.in.gov">info@bloomington.in.gov</a>, call the City at 812.349.3400, or view other ways to <a href="https://bloomington.in.gov/contact">contact the City of Bloomington</a>.
            </p>
        </div>
    </div>
    <div id="categories-wrapper" class="clearfix row">
    </div>
    <div class="row">
        <div class="col-12">
            <p class="blockquote blockquote-danger">PLEASE NOTE:  This system is not for reporting emergencies or imminent safety hazards.</p>

            <p>If this is an emergency, please immediately dial 911 for assistance.   Examples of an emergency include if you see a crime in progress, a fire, someone is experiencing a serious health issue or you witness a traffic accident.</p>

            <p>If this is a safety hazard that could cause an injury,  please immediately call City Utilities Control at 812-339-1444.  This number is staffed 24 hours a day. The appropriate staff will be dispatched to address the safety hazard. Examples of this could include a fallen branch blocking a road, downed power line, or a displaced manhole cover.</p>

            <p>When in doubt, please call, even if you are not sure. Staff will be happy to assist you!</p>
        </div>
    </div>

</div>
</body>
<script type="text/template" id="multipleValueListTemplate">
    <div class="form-group">
        <label for="<%=code%>"><%=description%></label>
        <!--<select class="custom-select" id="<%=code%>" name="<%=code%>" multiple <%=required%>>-->
        <!--<option value="" disabled selected>Select your option</option>-->
        <% _.each(values,function(value,key,arr) {
        var unique = value.name.replace(/\s/g, '');
        %>
        <!--<option value="<%=value.key%>"><%=value.name%></option>-->
        <div class="form-check">
            <input class="form-check-input" type="checkbox" value="<%=value.key%>" name="attribute[<%=code%>][]" id="<%=unique%>">
            <label class="form-check-label" for="<%=unique%>">
                <%=value.name%>
            </label>
        </div>
        <% }); %>
        <!--</select>-->
    </div>
</script>
<script type="text/template" id="singleValueListTemplate">
    <div class="form-group">
        <label for="<%=code%>"><%=description%></label>
        <select class="custom-select" id="<%=code%>" name="attribute[<%=code%>]" <%=required%>>
        <option value="" disabled selected>Select your option</option>
        <% _.each(values,function(value,key,arr) { %>
        <option value="<%=value.key%>"><%=value.name%></option>
        <% }); %>
        </select>
    </div>
</script>
<script type="text/template" id="stringTemplate">
    <div class="form-group">
        <label for="<%=code%>"><%=description%></label>
        <input type="text" class="form-control" id="<%=code%>" name="attribute[<%=code%>]" aria-describedby="emailHelp" <%=required%>>
        <!--<small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>-->
    </div>
</script>
<script type="text/template" id="numberTemplate">
    <div class="form-group">
        <label for="<%=code%>"><%=description%></label>
        <input type="number" class="form-control" id="<%=code%>" name="attribute[<%=code%>]" aria-describedby="emailHelp" <%=required%>>
        <!--<small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>-->
    </div>
</script>
<script type="text/template" id="datetimeTemplate">
    <div class="form-group">
        <label for="<%=code%>"><%=description%></label>
        <input type="datetime" class="form-control" id="<%=code%>" name="attribute[<%=code%>]" aria-describedby="emailHelp" <%=required%>>
        <!--<small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>-->
    </div>
</script>
<script type="text/template" id="textTemplate">
    <div class="form-group">
        <label for="<%=code%>"><%=description%></label>
        <textarea class="form-control" id="<%=code%>" name="attribute[<%=code%>]" rows="3" <%=required%>></textarea>
        <!--<small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>-->
    </div>
</script>
<script type="text/template" id="categoryTemplate">
    <div class="article category col-12 col-md-6 col-lg-4" value="<%=key%>">
        <div class="card">
            <div class="card-body">
                <h3 class="card-title"><%= key %></h3>
            </div>
        </div>
        <div class="ip-details">
            <div class="row">
                <div class="col-12">
                    <h4>
                        Report An Issue
                    </h4>
                </div>
                <div class="col-12">
                    <p>
                        Select a report to send to the City for action.
                    </p>
                </div>
            </div>
            <div class="row">
                <div class="col-12 col-md-4">
                    <h5>Reports</h5>
                    <ul class="list-group">
                        <%=snippet%>
                    </ul>
                </div>
                <div class="col-12 col-md-8 ">
                    <h5>&nbsp;</h5>
                    <div class="form-wrapper">
                        <p>
                            Use these form to notify the City of community issues, such as potholes, graffiti, malfunctioning street lights, and more.
                        </p>
                        <p>
                            If this is an emergency, please immediately dial 911 for assistance. If this is a safety hazard that could cause an injury,  please immediately call City Utilities Control at 812-339-1444.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>
<script type="text/template" id="formTemplate">
    <form id="request">
        <h4><%=service_name%></h4>
        <p><%=description%></p>
        <input type="hidden" name="service_code" value="<%=service_code%>">

        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="first_name">First Name</label>
                <input type="text" class="form-control" id="first_name" name="first_name" placeholder="First Name">
            </div>
            <div class="form-group col-md-6">
                <label for="last_name">Last Name</label>
                <input type="text" class="form-control" id="last_name"  name="last_name" placeholder="Last Name">
            </div>
        </div>
        <div class="form-row">
            <div class="form-group col-md-6">
                <label for="phone">Phone Number</label>
                <input type="text" class="form-control" id="phone" name="phone" placeholder="Phone Number">
            </div>
            <div class="form-group col-md-6">
                <label for="email">Email</label>
                <input type="text" class="form-control" id="email" name="email" placeholder="Email">
            </div>
        </div>
        <div class="form-group">
            <label for="address_string">Location</label>
            <div id = "gmap" style = "height:320px;margin-bottom: 10px"></div>
            <div class="input-group mb-3">
                <input type="hidden" >
                <input type="hidden" name="lat" id="lat">
                <input type="hidden" name="long" id="long">
                <input type="text" class="form-control" name="address_string" id="address_string" placeholder="Address">
                <div class="input-group-append">
                    <button class="btn btn-info" id="map-button" type="button">Capture <i class="fas fa-map-marker-alt"></i></button>
                </div>
            </div>
        </div>
        <div class="form-group">
            <label for="description">Description</label>
            <textarea class="form-control" id="description" name="description" rows="3"></textarea>
        </div>
        <div id="details">
            <%=details%>
        </div>
        <div class="form-group">
            <label for="media">Upload a photo</label>
            <input type="file" class="form-control-file" id="media" name="media">
        </div>
        <button type="button" id="formSubmit" class="btn btn-primary">Submit</button>
        <button type="button" id="formClose" class="btn btn-light">Close</button>
    </form>
</script>
<script src="lib/jquery/jquery-3.1.1.min.js"></script>
<script src="lib/underscore-min.js"></script>
<script src="lib/jquery.blockUI.js"></script>
<script src = "https://maps.googleapis.com/maps/api/js?key=AIzaSyAmTszpfz43HePsjFO98RW29x7tF1FmUro&sensor=true"></script>
<script src="lib/bootstrap/js/bootstrap.min.js"></script>
<script src="lib/bootstrap/js/popper.min.js"></script>
<script src="lib/jquery-inline-popup.js"></script>
<!--<script src="lib/parsley.js"></script>-->
<script src="js/uReport.js"></script>
</html>
